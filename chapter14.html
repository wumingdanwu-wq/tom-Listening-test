<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±¤å§†Â·ç´¢äºšå†é™©è®° - å¬åŠ›ç‰¹è®­ Ch.14</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <style>
        body { background-color: #f5f3ff; font-family: 'Segoe UI', Tahoma, sans-serif; -webkit-tap-highlight-color: transparent; }
        .input-blank { border-bottom: 2px solid #a78bfa; background: transparent; text-align: center; color: #6d28d9; font-weight: bold; border-radius: 0; padding: 0 5px; transition: all 0.3s; }
        .input-blank:focus { border-color: #7c3aed; outline: none; background-color: rgba(124, 58, 237, 0.1); }
        .correct-input { border-color: #22c55e !important; color: #16a34a !important; background-color: #f0fdf4 !important; }
        .wrong-input { border-color: #ef4444 !important; color: #dc2626 !important; background-color: #fef2f2 !important; }
    </style>
</head>

<body class="pb-16">

<div id="cover-page" class="fixed inset-0 z-50 bg-gradient-to-b from-indigo-600 to-slate-900 flex flex-col items-center justify-center p-6 text-white text-center">
    <div class="w-32 h-32 bg-white/20 rounded-3xl backdrop-blur-md flex items-center justify-center mb-6 shadow-2xl">
        <i class="fas fa-campground text-5xl text-indigo-200"></i>
    </div>
    <h1 class="text-3xl font-black mb-2 tracking-tight">æ±¤å§†Â·ç´¢äºšå†é™©è®°</h1>
    <p class="text-indigo-100 mb-8 opacity-80">å…­å¹´çº§è‹±è¯­Â·é¢„ä¹ ä¸€èˆ¬è¿‡å»æ—¶</p>
    
    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 mb-10 w-full max-w-xs border border-white/20">
        <div class="flex justify-between text-xs mb-2 text-left">
            <span>å½“å‰ç« èŠ‚</span>
            <span class="font-bold text-indigo-300">Chapter 14</span>
        </div>
        <div class="h-1.5 w-full bg-white/20 rounded-full overflow-hidden">
            <div class="h-full bg-indigo-400" style="width: 70%"></div>
        </div>
    </div>

    <button onclick="startChallenge()" class="w-full max-w-xs bg-white text-indigo-700 font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition-transform text-lg">
        å¼€å§‹è‹±é›„ä¹‹æ—…
    </button>
</div>

<header class="bg-white shadow-sm sticky top-0 z-20 px-4 py-3 flex justify-between items-center text-left">
    <h1 class="text-lg font-bold text-slate-800"><i class="fas fa-headphones text-indigo-500 mr-2"></i>Tom Sawyer (Ch.14)</h1>
    <span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded">Grade 6 ä¸‹é¢„ä¹ </span>
</header>

<main class="px-4 mt-4 max-w-md mx-auto">
    <div class="bg-white rounded-2xl shadow-lg p-5 mb-6 border border-indigo-100">
        <h2 class="font-bold text-slate-700 mb-3 text-left">Step 1: Listen</h2>
        <audio controls class="w-full h-10 mb-4 rounded bg-slate-100">
            <source src="tom14.wav" type="audio/wav">
        </audio>

        <details class="group text-left">
            <summary class="flex items-center justify-between cursor-pointer list-none text-sm text-indigo-600 font-bold bg-indigo-50 p-3 rounded-lg hover:bg-indigo-100 transition">
                <span>ğŸ“– å¬ä¸æ‡‚ï¼Ÿç‚¹å‡»æŸ¥çœ‹ç¬¬14ç« åŸæ–‡</span>
                <i class="fas fa-chevron-down transition group-open:rotate-180"></i>
            </summary>
            <div class="mt-2 text-sm text-slate-700 leading-relaxed bg-slate-50 p-4 rounded-lg border border-slate-200 font-serif h-64 overflow-y-auto text-left">
                <p class="mb-3"><strong class="text-slate-900">Narrator:</strong> It was morning on the island. Joe and Huck were waiting. Suddenly, Tom came back!</p>
                <p class="mb-3"><strong class="text-slate-900">Tom:</strong> "Hello, my friends! I am back!"</p>
                <p class="mb-3"><strong class="text-slate-900">Joe:</strong> "Wow, Tom! We are so happy."</p>
                <p class="mb-3"><strong class="text-slate-900">Narrator:</strong> They made a fire. They had a very good breakfast. They ate some meat and fresh fish. It was delicious.</p>
                <p class="mb-3"><strong class="text-slate-900">Tom:</strong> "I went home last night. It was a great trip! But now I am very tired."</p>
                <p class="mb-3"><strong class="text-slate-900">Huck:</strong> "You can sleep, Tom. Joe and I will go fishing."</p>
                <p class="mb-3"><strong class="text-slate-900">Narrator:</strong> Tom told them his story. They felt like heroes! Then, Tom went to sleep in the shade. He slept until noon. Joe and Huck went to the river. They felt very happy.</p>
            </div>
        </details>
    </div>

    <form id="quizForm" onsubmit="submitQuiz(event)">
        <div class="bg-white rounded-2xl shadow-md p-5 mb-5 border-l-4 border-indigo-500 relative text-left">
            <span class="absolute top-0 right-0 bg-indigo-100 text-indigo-600 text-xs font-bold px-2 py-1 rounded-bl-lg">50åˆ†</span>
            <h3 class="font-bold text-slate-800 mb-4">Task 1: Fill in the blanks</h3>
            <div class="space-y-8 text-base text-slate-700 leading-loose">
                <div>
                    <div>1. They made a fire and had a very good <input type="text" id="q1" autocomplete="off" class="input-blank w-28" placeholder="?">.</div>
                    <div id="exp_q1" class="hidden mt-2 p-3 bg-indigo-50 text-xs text-indigo-800 rounded-xl border border-indigo-100"></div>
                </div>
                <div>
                    <div>2. They ate some meat and fresh <input type="text" id="q2" autocomplete="off" class="input-blank w-20" placeholder="?">.</div>
                    <div id="exp_q2" class="hidden mt-2 p-3 bg-indigo-50 text-xs text-indigo-800 rounded-xl border border-indigo-100"></div>
                </div>
                <div>
                    <div>3. Tom was very tired, so he went to <input type="text" id="q3" autocomplete="off" class="input-blank w-20" placeholder="?"> in the shade.</div>
                    <div id="exp_q3" class="hidden mt-2 p-3 bg-indigo-50 text-xs text-indigo-800 rounded-xl border border-indigo-100"></div>
                </div>
                <div>
                    <div>4. Huck and Joe wanted to go <input type="text" id="q4" autocomplete="off" class="input-blank w-24" placeholder="?"> in the river.</div>
                    <div id="exp_q4" class="hidden mt-2 p-3 bg-indigo-50 text-xs text-indigo-800 rounded-xl border border-indigo-100"></div>
                </div>
                <div>
                    <div>5. They were on the island and felt very <input type="text" id="q5" autocomplete="off" class="input-blank w-20" placeholder="?">.</div>
                    <div id="exp_q5" class="hidden mt-2 p-3 bg-indigo-50 text-xs text-indigo-800 rounded-xl border border-indigo-100"></div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-md p-5 mb-8 border-l-4 border-orange-500 relative text-left">
            <span class="absolute top-0 right-0 bg-orange-100 text-orange-600 text-xs font-bold px-2 py-1 rounded-bl-lg">50åˆ†</span>
            <h3 class="font-bold text-slate-800 mb-4">Task 2: True (T) or False (F)</h3>
            <div class="space-y-6">
                <div>
                    <p class="text-sm font-medium mb-2">1. Tom didn't come back to the island in the morning.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf1" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf1" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf1" class="hidden mt-2 p-3 bg-orange-50 text-xs text-orange-800 rounded-xl border border-orange-100"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">2. The boys ate apples and bananas for breakfast.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf2" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf2" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf2" class="hidden mt-2 p-3 bg-orange-50 text-xs text-orange-800 rounded-xl border border-orange-100"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">3. Tom told his friends about his trip last night.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf3" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf3" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf3" class="hidden mt-2 p-3 bg-orange-50 text-xs text-orange-800 rounded-xl border border-orange-100"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">4. Tom went fishing with Joe and Huck in the morning.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf4" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf4" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf4" class="hidden mt-2 p-3 bg-orange-50 text-xs text-orange-800 rounded-xl border border-orange-100"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">5. Tom slept until noon.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf5" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf5" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf5" class="hidden mt-2 p-3 bg-orange-50 text-xs text-orange-800 rounded-xl border border-orange-100"></div>
                </div>
            </div>
        </div>

        <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-violet-600 text-white font-bold py-4 rounded-xl shadow-lg active:scale-95 transition-transform text-lg mb-8">
            äº¤å· (Submit)
        </button>
    </form>
</main>

<div id="poster-modal" class="hidden fixed inset-0 bg-slate-900/90 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div id="poster-content" class="bg-white w-full max-w-sm rounded-3xl overflow-hidden shadow-2xl relative">
       <div class="bg-gradient-to-r from-indigo-500 to-purple-600 pt-8 pb-12 text-center text-white relative">
            <div class="text-[10px] uppercase tracking-[0.2em] opacity-80 mb-2">Achievement Unlocked</div>
            <div class="relative inline-block mb-2">
                <div class="w-24 h-24 bg-black/10 rounded-full flex items-center justify-center backdrop-blur-md border-2 border-white/40 shadow-inner">
                    <span id="poster-score" class="text-2xl font-black text-white drop-shadow-md">0 / 100</span>
                </div>
                <div class="absolute -bottom-1 -right-1 w-9 h-9 bg-white rounded-full flex items-center justify-center shadow-xl border-2 border-indigo-100">
                    <i class="fas fa-fire text-orange-500 text-base"></i>
                </div>
            </div>
            <h2 class="text-xl font-black tracking-tight mt-2">å­¤å²›è‹±é›„ Â· è£èª‰å‹‹ç« </h2>
        </div>

        <div class="px-6 -mt-6">
            <div class="bg-white rounded-2xl shadow-xl p-5 border border-slate-50">
                <div class="flex items-center gap-3 mb-6 border-b border-slate-50 pb-4 text-left">
                    <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 border-2 border-indigo-50">
                        <i class="fas fa-user-graduate text-xl"></i>
                    </div>
                    <div>
                        <div class="flex items-center gap-2">
                            <span class="font-black text-slate-800 text-lg">å¤šå¤š</span>
                            <span class="text-[10px] bg-indigo-50 text-indigo-500 px-2 py-0.5 rounded-full font-bold">å…­ä¸‹é¢„ä¹ </span>
                        </div>
                        <div class="text-[10px] text-slate-400 mt-0.5">
                            <i class="far fa-clock"></i> 2026å¹´2æœˆ Â· ç¬¬14ç« è¾¾æˆ
                        </div>
                    </div>
                </div>

                <div class="space-y-5 text-left">
                    <div>
                        <div class="text-[10px] font-bold text-slate-400 mb-1 uppercase tracking-wider italic">Material</div>
                        <div class="text-sm font-bold text-slate-700">ã€Šæ±¤å§†Â·ç´¢äºšå†é™©è®°ã€‹Â· ç¬¬14ç« </div>
                    </div>

                    <div>
                        <div class="text-[10px] font-bold text-slate-400 mb-2 flex items-center gap-1">
                            <i class="fas fa-book-open"></i> æ ¸å¿ƒè¯æ±‡ (Key Vocab)
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-indigo-50/50 p-2.5 rounded-xl border border-indigo-100/50">
                                <div class="text-sm font-black text-indigo-700">breakfast</div>
                                <div class="text-[10px] text-indigo-500/80 italic">æ—©é¤</div>
                            </div>
                            <div class="bg-blue-50/50 p-2.5 rounded-xl border border-blue-100/50">
                                <div class="text-sm font-black text-blue-700">fishing</div>
                                <div class="text-[10px] text-blue-500/80 italic">é’“é±¼</div>
                            </div>
                            <div class="bg-purple-50/50 p-2.5 rounded-xl border border-purple-100/50">
                                <div class="text-sm font-black text-purple-700">slept</div>
                                <div class="text-[10px] text-purple-500/80 italic">ç¡è§‰(è¿‡å»å¼)</div>
                            </div>
                            <div class="bg-rose-50/50 p-2.5 rounded-xl border border-rose-100/50">
                                <div class="text-sm font-black text-rose-700">trip</div>
                                <div class="text-[10px] text-rose-500/80 italic">æ—…è¡Œ</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-6 flex flex-col gap-3">
            <button onclick="downloadPoster()" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-xl active:scale-95 transition-transform">
                <i class="fas fa-cloud-download-alt text-indigo-400"></i>
                ä¿å­˜è£èª‰æµ·æŠ¥
            </button>
            <button onclick="closePoster()" class="w-full text-slate-400 py-2 text-xs font-bold hover:text-slate-600 transition">
                æš‚æ—¶å…³é—­
            </button>
        </div>
    </div>
</div>

<script>
// --- Chapter 14 Logic ---
const answers = {
    q1: ["breakfast"], q2: ["fish"], q3: ["sleep"], q4: ["fishing"], q5: ["happy"],
    tf1: "F", tf2: "F", tf3: "T", tf4: "F", tf5: "T"
};

const explanations = {
    q1: "âœ… <b>åŸæ–‡å®šä½:</b> They had a very good <b>breakfast</b>. <br><span class='text-gray-500'>è§£æ: ç”·å­©ä»¬èšåœ¨ä¸€èµ·åƒäº†ä¸€é¡¿ä¸°ç››çš„æ—©é¤ã€‚</span>",
    q2: "âœ… <b>åŸæ–‡å®šä½:</b> They ate some meat and fresh <b>fish</b>. <br><span class='text-gray-500'>è§£æ: ä»–ä»¬çš„æ—©é¤é‡Œæœ‰å’¸è‚‰å’Œæ–°é²œçš„é±¼ã€‚</span>",
    q3: "âœ… <b>åŸæ–‡å®šä½:</b> Tom went to <b>sleep</b> in the shade. <br><span class='text-gray-500'>è§£æ: æ±¤å§†å› ä¸ºå¤œé—´èµ¶è·¯å¾ˆç´¯ï¼Œæ‰€ä»¥å»ç¡è§‰äº†ã€‚</span>",
    q4: "âœ… <b>åŸæ–‡å®šä½:</b> Joe and I will go <b>fishing</b>. <br><span class='text-gray-500'>è§£æ: go fishing æ˜¯å…­å¹´çº§ä¸‹å†Œ Unit 2 çš„é«˜é¢‘çŸ­è¯­ã€‚</span>",
    q5: "âœ… <b>åŸæ–‡å®šä½:</b> They felt very <b>happy</b>. <br><span class='text-gray-500'>è§£æ: å²›ä¸Šçš„ç”Ÿæ´»è®©ç”·å­©ä»¬æ„Ÿåˆ°éå¸¸å¿«ä¹ã€‚</span>",
    tf1: "âŒ <b>False.</b> åŸæ–‡è¯´ Suddenly, Tom came back! è¯´æ˜ä»–åœ¨æ—©æ™¨å›åˆ°äº†å²›ä¸Šã€‚",
    tf2: "âŒ <b>False.</b> ä»–ä»¬åƒçš„æ˜¯ meat and fresh fishï¼Œä¸æ˜¯æ°´æœã€‚",
    tf3: "âœ… <b>True.</b> åŸæ–‡æåˆ° Tom told them his storyï¼Œè®²è¿°äº†ä»–æ˜¨æ™šå›å®¶çš„å†’é™©ã€‚",
    tf4: "âŒ <b>False.</b> æ±¤å§†å»ç¡è§‰äº† (went to sleep)ï¼Œåªæœ‰ä¹”å’Œå“ˆå…‹å»é’“é±¼äº†ã€‚",
    tf5: "âœ… <b>True.</b> åŸæ–‡æ˜ç¡®è¯´ He slept until noonï¼Œæ±¤å§†ç¡®å®ç¡åˆ°äº†ä¸­åˆã€‚"
};

window.startChallenge = function() { document.getElementById('cover-page').style.display = 'none'; window.scrollTo(0, 0); };
window.closePoster = function() { document.getElementById('poster-modal').classList.add('hidden'); };

window.submitQuiz = function(e) {
    e.preventDefault();
    let fillCorrect = 0, tfCorrect = 0;

    ['q1', 'q2', 'q3', 'q4', 'q5'].forEach(id => {
        let el = document.getElementById(id), expDiv = document.getElementById('exp_' + id);
        if (el && answers[id].includes(el.value.trim().toLowerCase())) { el.classList.add('correct-input'); fillCorrect++; } 
        else if(el) { el.classList.add('wrong-input'); }
        if (expDiv) { expDiv.innerHTML = explanations[id]; expDiv.classList.remove('hidden'); }
    });

    ['tf1', 'tf2', 'tf3', 'tf4', 'tf5'].forEach(name => {
        let sel = document.querySelector(`input[name="${name}"]:checked`), expDiv = document.getElementById('exp_' + name);
        if (sel && sel.value === answers[name]) tfCorrect++;
        if (expDiv) { expDiv.innerHTML = (sel && sel.value === answers[name] ? `<span class="text-green-600 font-bold">å›ç­”æ­£ç¡®ï¼</span><br>` : `<span class="text-red-600 font-bold">å›ç­”é”™è¯¯ã€‚</span><br>`) + explanations[name]; expDiv.classList.remove('hidden'); }
    });

    let totalScore = (fillCorrect * 10) + (tfCorrect * 10);
    localStorage.setItem('tom_ch14_done', 'true');
    document.getElementById('poster-score').innerText = totalScore + " / 100";
    document.getElementById('poster-modal').classList.remove('hidden');
    window.scrollTo(0, 0);
};

window.downloadPoster = function() {
    html2canvas(document.getElementById('poster-content'), { useCORS: true, scale: 3 }).then(canvas => {
        const link = document.createElement('a'); link.download = 'å¤šå¤šæ±¤å§†ç´¢äºšCh14å‹‹ç« .png'; link.href = canvas.toDataURL('image/png'); link.click();
    });
};
</script>
</body>
</html>