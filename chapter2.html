<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±¤å§†Â·ç´¢äºšå†é™©è®° - å¬åŠ›ç‰¹è®­ Ch.2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <style>
        body { background-color: #f0f9ff; font-family: 'Segoe UI', Tahoma, sans-serif; -webkit-tap-highlight-color: transparent; }
        .input-blank { border-bottom: 2px solid #94a3b8; background: transparent; text-align: center; color: #2563eb; font-weight: bold; border-radius: 0; padding: 0 5px; transition: all 0.3s; }
        .input-blank:focus { border-color: #3b82f6; outline: none; background-color: rgba(59, 130, 246, 0.1); }
        .correct-input { border-color: #22c55e !important; color: #16a34a !important; background-color: #f0fdf4 !important; }
        .wrong-input { border-color: #ef4444 !important; color: #dc2626 !important; background-color: #fef2f2 !important; }
        .explanation-box { background-color: #f1f5f9; border-left: 4px solid #3b82f6; padding: 12px; margin-top: 8px; font-size: 0.9rem; color: #334155; border-radius: 4px; line-height: 1.6; }
    </style>
</head>

<body class="pb-16">

<div id="cover-page" class="fixed inset-0 z-50 bg-gradient-to-b from-blue-500 to-indigo-700 flex flex-col items-center justify-center p-6 text-white text-center">
    <div class="w-32 h-32 bg-white/20 rounded-3xl backdrop-blur-md flex items-center justify-center mb-6 shadow-2xl">
        <i class="fas fa-paint-brush text-5xl text-yellow-300"></i>
    </div>
    <h1 class="text-3xl font-black mb-2 tracking-tight">æ±¤å§†Â·ç´¢äºšå†é™©è®°</h1>
    <p class="text-blue-100 mb-8 opacity-80">å…­å¹´çº§è‹±è¯­Â·è·¨å­¦ç§‘å¬åŠ›ç‰¹è®­</p>
    
    <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 mb-10 w-full max-w-xs border border-white/20">
        <div class="flex justify-between text-xs mb-2 text-left">
            <span>å½“å‰ç« èŠ‚</span>
            <span class="font-bold text-yellow-300">Chapter 2</span>
        </div>
        <div class="h-1.5 w-full bg-white/20 rounded-full overflow-hidden">
            <div class="h-full bg-yellow-400" style="width: 6%"></div>
        </div>
    </div>

    <button onclick="startChallenge()" class="w-full max-w-xs bg-white text-blue-600 font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition-transform text-lg">
        å¼€å§‹åˆ·å¢™æŒ‘æˆ˜
    </button>
</div>

<header class="bg-white shadow-sm sticky top-0 z-20 px-4 py-3 flex justify-between items-center text-left">
    <h1 class="text-lg font-bold text-slate-800"><i class="fas fa-headphones text-blue-500 mr-2"></i>Tom Sawyer (Ch.2)</h1>
    <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded">Grade 6</span>
</header>

<main class="px-4 mt-4 max-w-md mx-auto">
    <div class="bg-white rounded-2xl shadow-lg p-5 mb-6 border border-blue-100">
        <h2 class="font-bold text-slate-700 mb-3 text-left">Step 1: Listen</h2>
        <audio controls class="w-full h-10 mb-4 rounded bg-slate-100">
            <source src="tom2.wav" type="audio/wav">
        </audio>

        <details class="group text-left">
            <summary class="flex items-center justify-between cursor-pointer list-none text-sm text-blue-600 font-bold bg-blue-50 p-3 rounded-lg hover:bg-blue-100 transition">
                <span>ğŸ“– ç‚¹å‡»æŸ¥çœ‹ç¬¬äºŒç« åŸæ–‡</span>
                <i class="fas fa-chevron-down transition group-open:rotate-180"></i>
            </summary>
            <div class="mt-2 text-sm text-slate-700 leading-relaxed bg-slate-50 p-4 rounded-lg border border-slate-200 font-serif h-64 overflow-y-auto">
                <p class="mb-3"><strong class="text-slate-900">Narrator:</strong> It is a bright Saturday morning. But Tom is not happy. He stands in front of a long fence with a big bucket of whitewash. He has to paint the whole fence!</p>
<p class="mb-3"><strong class="text-slate-900">Narrator:</strong> Ben Rogers comes down the street. He is eating a juicy apple. He is pretending to be a big steamboat.</p>
<p class="mb-3"><strong class="text-slate-900">Ben:</strong> Stop the ship! Ting-a-ling! Hello, Tom! You have to work today? That is too bad!</p>
<p class="mb-3"><strong class="text-slate-900">Narrator:</strong> Tom looks at the fence. He paints it very carefully, like an artist.</p>
<p class="mb-3"><strong class="text-slate-900">Tom:</strong> Work? This isn't work, Ben. Does a boy get a chance to whitewash a fence every day?</p>
<p class="mb-3"><strong class="text-slate-900">Narrator:</strong> Ben stops eating his apple. He looks interested. </p>
<p class="mb-3"><strong class="text-slate-900">Ben:</strong> Tom, let me paint a little? Please?</p>
<p class="mb-3"><strong class="text-slate-900">Tom:</strong> No, no. Aunt Polly is very strict. This fence must be perfect.</p>
<p class="mb-3"><strong class="text-slate-900">Ben:</strong> Oh, please, Tom! I will give you my apple!</p>
<p class="mb-3"><strong class="text-slate-900">Narrator:</strong> Tom takes the apple. He sits in the shade and eats it. Ben works hard in the hot sun. Soon, more boys come. They all pay Tom with toys to paint the fence. By the afternoon, the fence has three coats of paint, and Tom is rich!</p>
            </div>
        </details>
    </div>

    <form id="quizForm" onsubmit="submitQuiz(event)">
        <div class="bg-white rounded-2xl shadow-md p-5 mb-5 border-l-4 border-blue-500 relative text-left">
            <span class="absolute top-0 right-0 bg-blue-100 text-blue-600 text-xs font-bold px-2 py-1 rounded-bl-lg">40åˆ†</span>
            <h3 class="font-bold text-slate-800 mb-4">Task 1: Fill in the blanks</h3>
            <div class="space-y-8 text-base text-slate-700 leading-loose">
                <div>1. Tom has to <input type="text" id="q1_1" class="input-blank w-24" placeholder="?"> the long <input type="text" id="q1_2" class="input-blank w-16" placeholder="?">.</div>
                <div>2. Ben gives Tom a juicy <input type="text" id="q2" class="input-blank w-20" placeholder="?">.</div>
                <div>3. Tom says painting the fence is not <input type="text" id="q3" class="input-blank w-20" placeholder="?">.</div>
                <div>4. Tom sits in the <input type="text" id="q4" class="input-blank w-20" placeholder="?"> and eats the apple.</div>
                <div id="exp_tasks" class="hidden">
                    <div id="exp_q1" class="explanation-box"></div>
                    <div id="exp_q2" class="explanation-box"></div>
                    <div id="exp_q3" class="explanation-box"></div>
                    <div id="exp_q4" class="explanation-box"></div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-md p-5 mb-8 border-l-4 border-purple-500 relative text-left">
            <span class="absolute top-0 right-0 bg-purple-100 text-purple-600 text-xs font-bold px-2 py-1 rounded-bl-lg">40åˆ†</span>
            <h3 class="font-bold text-slate-800 mb-4">Task 2: True (T) or False (F)</h3>
            <div class="space-y-6">
                <div>
                    <p class="text-sm font-medium mb-2">1. Tom is very happy to paint the fence at first.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf1" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf1" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf1" class="hidden explanation-box"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">2. Ben pretends to be a steamboat in the street.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf2" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf2" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf2" class="hidden explanation-box"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">3. Tom gives Ben money to help him paint.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf3" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf3" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf3" class="hidden explanation-box"></div>
                </div>
                <div>
                    <p class="text-sm font-medium mb-2">4. Many boys help Tom, and the fence is painted 3 times.</p>
                    <div class="flex gap-6">
                        <label class="flex items-center"><input type="radio" name="tf4" value="T" class="mr-1 w-5 h-5"> T</label>
                        <label class="flex items-center"><input type="radio" name="tf4" value="F" class="mr-1 w-5 h-5"> F</label>
                    </div>
                    <div id="exp_tf4" class="hidden explanation-box"></div>
                </div>
            </div>
        </div>

        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg active:scale-95 transition-transform text-lg mb-8">
            äº¤å· (Submit)
        </button>
    </form>
</main>

<script>
// ğŸ”‘ ç¬¬äºŒç«  ç­”æ¡ˆåº“
const answers = {
    q1_1: ["whitewash"], q1_2: ["fence"],
    q2: ["apple"],
    q3: ["work"],
    q4: ["shade"],
    tf1: "F", tf2: "T", tf3: "F", tf4: "T"
};

const explanations = {
    q1: "âœ… <b>åŸæ–‡å®šä½:</b> He has to paint the whole <b>fence</b> with <b>whitewash</b>.",
    q2: "âœ… <b>åŸæ–‡å®šä½:</b> Ben gives Tom a juicy <b>apple</b> to paint a little.",
    q3: "âœ… <b>åŸæ–‡å®šä½:</b> Work? This isn't <b>work</b>, Ben.",
    q4: "âœ… <b>åŸæ–‡å®šä½:</b> Tom sits in the <b>shade</b> and eats the apple.",
    tf1: "âŒ <b>False.</b> æ±¤å§†ä¸€å¼€å§‹å¹¶ä¸å¼€å¿ƒ (not happy)ã€‚",
    tf2: "âœ… <b>True.</b> æœ¬å‡è£…è‡ªå·±æ˜¯ä¸€è‰˜è’¸æ±½èˆ¹ (steamboat)ã€‚",
    tf3: "âŒ <b>False.</b> æ˜¯æœ¬ç»™æ±¤å§†è‹¹æœï¼Œè€Œä¸æ˜¯æ±¤å§†ç»™æœ¬é’±ã€‚",
    tf4: "âœ… <b>True.</b> æœ€åå›´æ è¢«åˆ·äº†ä¸‰æ¬¡ (three coats of paint)ã€‚"
};

function startChallenge() {
    document.getElementById('cover-page').style.display = 'none';
    window.scrollTo(0, 0);
}

function closePoster() {
    document.getElementById('poster-modal').classList.add('hidden');
}

function submitQuiz(e) {
    e.preventDefault();
    let score = 0;

    function checkBlank(id, key) {
        let el = document.getElementById(id);
        if(!el) return false;
        let val = el.value.trim().toLowerCase();
        if (answers[id].includes(val)) {
            el.classList.add('correct-input');
            el.classList.remove('wrong-input');
            return true;
        } else {
            el.classList.add('wrong-input');
            el.classList.remove('correct-input');
            return false;
        }
    }

    // æ£€æŸ¥æ¯ä¸€å¤§é¢˜
    if(checkBlank('q1_1', 'q1') && checkBlank('q1_2', 'q1')) score++;
    if(checkBlank('q2', 'q2')) score++;
    if(checkBlank('q3', 'q3')) score++;
    if(checkBlank('q4', 'q4')) score++;

    // æ˜¾ç¤ºå¡«ç©ºé¢˜è§£æ
    document.getElementById('exp_tasks').classList.remove('hidden');
    ['q1', 'q2', 'q3', 'q4'].forEach(k => {
        document.getElementById('exp_'+k).innerHTML = explanations[k];
    });

    // æ£€æŸ¥åˆ¤æ–­é¢˜
    ['tf1', 'tf2', 'tf3', 'tf4'].forEach(name => {
        let sel = document.querySelector(`input[name="${name}"]:checked`);
        let expDiv = document.getElementById('exp_' + name);
        if (sel && sel.value === answers[name]) {
            score++;
            expDiv.innerHTML = `<span class="text-green-600 font-bold">å›ç­”æ­£ç¡®ï¼</span><br>` + explanations[name];
        } else {
            expDiv.innerHTML = `<span class="text-red-600 font-bold">å›ç­”é”™è¯¯ã€‚</span><br>` + explanations[name];
        }
        expDiv.classList.remove('hidden');
    });

    document.getElementById('poster-score').innerText = score + " / 8";
    document.getElementById('poster-modal').classList.remove('hidden');
}

function downloadPoster() {
    const poster = document.getElementById('poster-content');
    html2canvas(poster, { useCORS: true, scale: 3, backgroundColor: '#ffffff' }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'å¤šå¤šæ±¤å§†ç´¢äºšCh2å‹‹ç« .png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    });
}
</script>

<div id="poster-modal" class="hidden fixed inset-0 z-[60] bg-slate-900/95 flex items-center justify-center p-4 backdrop-blur-sm">
    <div id="poster-content" class="bg-white rounded-[2rem] overflow-hidden w-full max-w-[340px] shadow-2xl relative border-[6px] border-white text-left">
        <div class="h-40 bg-gradient-to-br from-amber-400 via-orange-500 to-red-500 flex flex-col items-center justify-center text-white relative">
            <div class="absolute top-2 right-4 text-[40px] font-black opacity-10 italic leading-none">PASS</div>
            <div class="text-[10px] uppercase tracking-[0.2em] font-black opacity-90 mb-2">Achievement Unlocked</div>
            <div class="bg-white/20 backdrop-blur-md rounded-full p-1.5 shadow-xl">
                <div class="bg-white text-orange-600 w-20 h-20 rounded-full flex flex-col items-center justify-center shadow-inner border-2 border-amber-200">
                    <span class="text-3xl font-black" id="poster-score">0 / 8</span>
                    <span class="text-[9px] font-bold -mt-1 uppercase">Score</span>
                </div>
            </div>
            <div class="mt-2 text-lg font-black tracking-widest drop-shadow-md">æŒ‘æˆ˜æˆåŠŸ Â· è£èª‰å‹‹ç« </div>
        </div>
        <div class="p-6 bg-[#fffcf9]">
            <div class="flex items-center gap-3 mb-6 bg-white p-3 rounded-2xl shadow-sm border border-orange-100">
                <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-amber-400 to-orange-500 flex items-center justify-center text-2xl shadow-sm border-2 border-white text-white">ğŸ†</div>
                <div class="text-left flex-1">
                    <div class="font-black text-slate-800 text-base">å¤šå¤š <span class="text-[10px] font-medium text-slate-400">å…­å¹´çº§</span></div>
                    <div class="text-[9px] text-orange-600 font-bold mt-0.5 flex items-center gap-1">
                        <i class="far fa-clock"></i> 2026å¹´2æœˆ Â· ç¬¬äºŒç« è¾¾æˆ
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                    <div class="text-[9px] text-slate-400 font-bold uppercase mb-1">Material</div>
                    <div class="text-[11px] font-bold text-slate-700 leading-tight">ã€Šæ±¤å§†Â·ç´¢äºšå†é™©è®°ã€‹ç¬¬äºŒç« </div>
                </div>
                <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                    <div class="text-[9px] text-slate-400 font-bold uppercase mb-1">Vocabulary</div>
                    <div class="flex flex-wrap gap-1">
                        <span class="text-[9px] font-black text-blue-600 tracking-tight">Whitewash</span>
                        <span class="text-[9px] font-black text-blue-600 tracking-tight">Fence</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between gap-4 border-t border-dashed border-slate-200 pt-5">
                <div class="text-left flex-1">
                    <div class="text-[11px] font-black text-slate-800 mb-1">AI åŠ©å­¦ Â· è·¨å­¦ç§‘æˆé•¿</div>
                    <p class="text-[9px] text-slate-400">é•¿æŒ‰è¯†åˆ«å³ä¾§äºŒç»´ç <br>åŠ å…¥æˆ‘çš„è‹±è¯­æ¢é™©å°é˜Ÿ</p>
                </div>
                <div class="relative w-14 h-14 p-1 bg-white border border-slate-100 rounded-lg shadow-sm">
                    <img src="myqr.jpg" class="w-full h-full object-cover" onerror="this.src='https://api.dicebear.com/7.x/shapes/svg?seed=qr&backgroundColor=f8fafc'">
                </div>
            </div>
            <button onclick="downloadPoster()" class="mt-6 w-full bg-slate-900 text-white py-3.5 rounded-2xl font-black shadow-xl active:scale-95 transition-all flex items-center justify-center gap-2 text-sm">
                <i class="fas fa-cloud-download-alt text-amber-400"></i> ä¿å­˜å‹‹ç« åˆ°ç›¸å†Œ
            </button>
        </div>
        <button onclick="closePoster()" class="absolute top-3 right-3 bg-white/20 text-white w-7 h-7 rounded-full flex items-center justify-center backdrop-blur-md">
            <i class="fas fa-times text-xs"></i>
        </button>
    </div>
</div>

</body>

</html>

